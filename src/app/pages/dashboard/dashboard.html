<div class="card">
  <h2 style="margin:0 0 12px;">–ü—Ä–æ–≥—Ä–µ—Å—Å</h2>
  <div class="row">
    <div>–û–ø—ã—Ç: <b>{{ (progress()?.xp || 0) }}</b></div>
    <div>–°–µ—Ä–∏—è: <b>{{ (progress()?.streak || 0) }}</b> üî•</div>
  </div>
  <div style="margin-top:10px;">
    <div class="row" style="justify-content:space-between;">
      <div>–î–Ω–µ–≤–Ω–∞—è —Ü–µ–ª—å: {{ daily().goal }} XP</div>
      <div>–°–µ–≥–æ–¥–Ω—è: <b>{{ daily().today }}</b> / {{ daily().goal }} XP</div>
    </div>
    <progress [value]="daily().today" [max]="daily().goal"></progress>
    <div class="row" style="margin-top:8px;">
      <input type="number" min="10" step="10" [formControl]="dailyGoal"
             style="width:100px; padding:6px; border-radius:8px; border:1px solid #334155; background:#0b1220; color:#e2e8f0;">
      <button class="ghost" (click)="saveGoal()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–µ–ª—å</button>
    </div>
  </div>
</div>

<h3 style="margin:20px 0 8px;">–Æ–Ω–∏—Ç—ã</h3>
<div class="grid">
  @for (unit of units(); track [$index, unit.id]) {
    <div class="card">
      <div style="font-weight:700; margin-bottom:8px;">{{ unit.title }}</div>
      <div style="font-size:12px; opacity:.8; margin-bottom:8px;">–£—Ä–æ–∫–∏: {{ unit.lessons.length }}</div>
      <div style="display:flex; gap:8px; flex-wrap:wrap;">
        @for (l of unit.lessons; track [$index, l.id]) {
          <a class="badge" [routerLink]="['/lesson', l.id]">
            {{ l.index + 1 }} ¬∑ {{ l.title }}
          </a>
        }
      </div>
    </div>
  }
</div>
